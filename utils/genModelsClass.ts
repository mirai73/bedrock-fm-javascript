import {
  BedrockClient,
  ListFoundationModelsCommand,
} from "@aws-sdk/client-bedrock";

const client = new BedrockClient();

const template = `// This files has been autogenerated - do not modify

export class Models {
{placeholder}
}`;

(async () => {
  const models = (
    await client.send(
      new ListFoundationModelsCommand({ byInferenceType: "ON_DEMAND" }),
    )
  ).modelSummaries
    ?.filter((ms) => ms.modelLifecycle?.status == "ACTIVE")
    .map((ms) => ms.modelId);
  const modelStrings = models?.map(
    (m) =>
      `  public static readonly ${m?.replace(/\-/g, "_").replace(/\./g, "_").replace(/\:/g, "_").toUpperCase()} = "${m}";`,
  );
  if (modelStrings) {
    console.log(template.replace("{placeholder}", modelStrings.join("\n")));
  }
})();
